<template>
    <li class={listItemClassName}>
        <div class="slds-chat-message">
            <div class="slds-chat-message__body">
                <template lwc:if={texto}>
                    <div class={messageTextClassName}>
                        <lightning-formatted-rich-text value={mensagem.conteudo}></lightning-formatted-rich-text>
                    </div>
                </template>
                <template lwc:elseif={image}>
                    <div class={messageImageClassName}>
                        <div class="slds-file">
                            <figure>
                                <div class="slds-file__figure">
                                    <template lwc:if={mensagem.urlMidia}>
                                        <img src={mensagem.urlMidia} alt="Carregando imagem..." />
                                    </template>
                                    <template lwc:else>
                                        <lightning-spinner alternative-text="Carregando dados, por favor aguarde..."  variant="brand" size="small"></lightning-spinner>
                                    </template>
                                </div>
                            </figure>
                            <div class="slds-file__title slds-file__title_scrim">
                                <div class="slds-file__actions-menu">
                                    <div class="slds-button-group" role="group">
                                        <lightning-button-icon title="Download" icon-name="utility:download"
                                            size="small" variant="bare-inverse" alternative-text="Download"
                                            onclick={baixarArquivo}></lightning-button-icon>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <template lwc:if={temConteudo}>
                            <div class={messageTextClassName}>
                                <lightning-formatted-rich-text
                                    value={mensagem.conteudo}></lightning-formatted-rich-text>
                            </div>
                        </template>
                    </div>
                </template>
                <template lwc:if={audio}>
                    <template lwc:if={urlAudio}>
                        <audio controls="controls" src={urlAudio}></audio>
                    </template>
                    <template lwc:else>
                        <lightning-spinner alternative-text="Carregando dados, por favor aguarde..."  variant="brand" size="small"></lightning-spinner>
                    </template>
                </template>
                <template lwc:if={document}>
                    <div class={messageFileClassName}>
                        <div class="slds-file slds-has-title">
                            <figure>
                                <div class="slds-file__crop slds-file__crop_4-by-3">
                                    <template lwc:if={mensagem.urlMidia}>
                                        <img src={imagem} alt="Description of the document" />
                                    </template>
                                    <template lwc:else>
                                        <lightning-spinner alternative-text="Carregando dados, por favor aguarde..."  variant="brand" size="small"></lightning-spinner>
                                    </template>
                                </div>
                                <figcaption class="slds-file__title slds-file__title_card slds-file-has-actions">
                                    <div class="slds-media slds-media_small slds-media_center">
                                        <div class="slds-media__figure slds-line-height_reset">
                                            <span class="slds-icon_container" title="pdf">
                                                <lightning-icon icon-name="doctype:attachment"
                                                    size="x-small"></lightning-icon>
                                            </span>
                                        </div>
                                        <div class="slds-media__body">
                                            <span class="slds-file__text slds-truncate"
                                                title={mensagem.nomeArquivo}>{mensagem.nomeArquivo}</span>
                                        </div>
                                    </div>
                                </figcaption>
                            </figure>
                            <div class="slds-file__title">
                                <div class="slds-file__actions-menu">
                                    <div class="slds-button-group" role="group">
                                        <lightning-button-icon title="Download" icon-name="utility:download"
                                            size="small" variant="bare" alternative-text="Download"
                                            onclick={baixarArquivo}></lightning-button-icon>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <template lwc:if={temConteudo}>
                        <div class={messageTextClassName}>
                            <lightning-formatted-rich-text
                                value={mensagem.conteudo}></lightning-formatted-rich-text>
                        </div>
                    </template> -->
                </template>
                <div class="slds-chat-message__meta">
                    <lightning-formatted-date-time value={mensagem.dataHora} month="numeric" day="numeric"
                        hour="2-digit" minute="2-digit" time-zone={userTimeZone}>
                    </lightning-formatted-date-time>
                </div>
            </div>
            
        </div>
        
    </li>
</template>